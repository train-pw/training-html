<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="index.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
    <script src="https://momentjs.com/downloads/moment.js"></script>
    <title>weather</title>
</head>

<body>
    <header class="weather">
        <div class="container-sm" style="margin-top: 80px;">
            <div class="card" style="background-color:white ;">
                <div class="weather-container">
                    <div class="row top">
                        <div class="col-sm-2"></div>
                        <div class="d-flex justify-content-center col-sm-3 " id="dmy" style="margin-top: 1%;font-size: 4vh;"></div>
                        <div class="d-flex justify-content-center col-sm-5 col-12 location" style="margin-top: 1%;font-size: 4vh;"></div>
                        <div class="d-flex justify-content-center col-sm-2 col-12" style="margin-top: 1%;font-size: 4vh;">rain map</div>
                    </div>
                    <div style="margin-top: 20px;"></div>
                    <div class="row">
                        <div class="col-sm-1 "></div>
                        <div class="d-flex justify-content-center col-sm-3 col-9">
                            <div class="weather-icon"></div>
                        </div>
                        <div class="col-sm-1 col-xs-4"></div>
                    
                        <div class="row col-sm-3 col-xs-1 temp">
                            <div class="col-4"></div>
                            <p class="d-flex justify-content-center temperature-value"></p>
                        </div>
                        <div class="col-sm-3 col-10">
                            <p class="d-flex justify-content-center col-sm-5 time" id="times"></p>
                            <p class="d-flex justify-content-center col-sm-6 days" id="day"></p>
                            <div class="d-flex justify-content-center col-sm-8 temperature-description"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
</body>

</html>
<style>
    * {
        padding: 0;
        margin: 0;
    }

    body {
        font-family: 'Jost', sans-serif;
    }

    .temp {

        text-align: start;
        font-size: 10rem;
        padding: 1vh;

    }

    .temperature-description {
        text-align: start;
        font-size: 3rem;
        margin-left: 10%;
    }

    .days {
        text-align: start;
        font-size: 3rem;
        margin-left: 10%;
    }

    .time {

        text-align: start;
        font-size: 3rem;
        margin-left: 10%;


    }

    .card {
        box-shadow: 5px 20px 50px #000;
        border-radius: 20px;

    }

    body {
        background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
    }

    .weather {
        height: 80rem;
    }

    .weather-icon {
        margin-left: 40%;
    }

    /* row */
    .row {
        margin: 0;
        padding: 0;
    }
</style>
<script>
    const last = moment(document.lastModified, "MM/DD/YYYY");
    const now = moment().format("HH:mm");
    const lastmdy = moment(document.lastModified).format("MM/DD/YYYY")
    const now1 = moment().format('dddd');
    console.log(document.lastModified);
    document.getElementById("times").innerHTML = now;
    document.getElementById("dmy").innerHTML = lastmdy;
    var yourDay = document.getElementById("day").innerHTML = now1;

    const iconElement = document.querySelector(".weather-icon");
    const tempElement = document.querySelector(".temperature-value ");
    const descElement = document.querySelector(".temperature-description ");
    const locationElement = document.querySelector(".location ");

    const weather = {};

    weather.temperature = {
        unit: "celsius"
    }
    // https://api.openweathermap.org/data/2.5/weather?lat=17.161738449978607&lon=104.15704850616895&appid=9150ad24beac576d02f5d7124c652d4a
    const KELVIN = 273;
    const key = "87d2ed38c6f228bea471868f750aaaf9";

    if ('geolocation' in navigator) {
        navigator.geolocation.getCurrentPosition(setPosition, showError);
    } else {
        notificationElement.style.display = "block";
        notificationElement.innerHTML = "<p>Browser doesn't Support Geolocation</p>";
    }
    function setPosition(position) {
        let latitude = position.coords.latitude;
        let longitude = position.coords.longitude;

        getWeather(latitude, longitude);
    }
    function showError(error) {
        notificationElement.style.display = "block";
        notificationElement.innerHTML = `<p> ${error.message} </p>`;
    }
    function getWeather(latitude, longitude) {
        let api = `http://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${key}`;

        fetch(api)
            .then(function (response) {
                let data = response.json();
                return data;
            })
            .then(function (data) {
                weather.temperature.value = Math.floor(data.main.temp - KELVIN);
                weather.description = data.weather[0].description;
                weather.iconId = data.weather[0].icon;
                weather.city = data.name;
                weather.country = data.sys.country;
            })
            .then(function () {
                displayWeather();
            });
    }

    function displayWeather() {
        iconElement.innerHTML = `<img src="icons/${weather.iconId}.png "/>`;
        tempElement.innerHTML = `${weather.temperature.value}Â°`;
        descElement.innerHTML = weather.description;
        locationElement.innerHTML = `${weather.city}, ${weather.country}`;
    }
    function celsiusToFahrenheit(temperature) {
        return (temperature * 9 / 5) + 32;
    }
</script>